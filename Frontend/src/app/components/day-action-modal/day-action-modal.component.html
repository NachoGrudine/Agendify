@if (isOpen) {
  <div class="modal-overlay" (click)="onBackdropClick($event)">
    <div class="modal-container">
      <!-- Header -->
      <div class="modal-header">
        <div class="header-content">
          <h2 class="modal-title">{{ formattedDate }}</h2>
          <p class="modal-subtitle">Gestión de turnos para hoy</p>
        </div>
        <button class="btn-close" (click)="onClose()" aria-label="Cerrar">
          <i-lucide [img]="XIcon" [size]="24"></i-lucide>
        </button>
      </div>

      <!-- Options -->
      <div class="modal-options">
        <!-- Ver Agenda del Día -->
        <button
          class="option-card"
          (click)="onViewDay()">
          <div class="option-icon">
            <i-lucide [img]="EyeIcon" [size]="28"></i-lucide>
          </div>
          <div class="option-content">
            <h3 class="option-title">Ver Agenda del Día</h3>
            <p class="option-description">
              Inspeccionar turnos, huecos libres y métricas del día de forma detallada.
            </p>
          </div>
        </button>

        <!-- Nuevo Turno -->
        <button
          class="option-card"
          [class.disabled]="isPastDate"
          [disabled]="isPastDate"
          (click)="onNewAppointment()">
          <div class="option-icon option-icon-primary">
            <i-lucide [img]="PlusIcon" [size]="28"></i-lucide>
          </div>
          <div class="option-content">
            <h3 class="option-title">Nuevo Turno</h3>
            <p class="option-description">
              Agendar una nueva cita para un cliente en este día de forma rápida.
            </p>
            @if (isPastDate) {
              <p class="option-warning">Esta fecha ya pasó</p>
            } @else {
              <span class="option-link">
                Seleccionar
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </span>
            }
          </div>
        </button>
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button class="btn-secondary" (click)="onClose()">
          Cerrar
        </button>
        <button
          class="btn-primary"
          [disabled]="isPastDate"
          (click)="onNewAppointment()">
          Confirmar
        </button>
      </div>
    </div>
  </div>
}
