# ============================================
# 📅 AGENDIFY - VARIABLES DE ENTORNO
# ============================================
#
# 🔧 INSTRUCCIONES DE CONFIGURACIÓN:
#
# 1. Copiar este archivo como ".env" en la raíz del proyecto:
#    PowerShell: Copy-Item .env.example .env
#    Bash: cp .env.example .env
#
# 2. Completar con valores reales (ver secciones abajo)
#
# 3. ⚠️ IMPORTANTE - SEGURIDAD:
#    - NUNCA subir el archivo .env a Git (ya está en .gitignore)
#    - Cambiar TODAS las contraseñas y secretos en producción
#    - Mantener este .env.example actualizado sin valores sensibles
#
# 4. Variables mínimas requeridas para desarrollo:
#    - MSSQL_SA_PASSWORD (y DB_PASSWORD con el mismo valor)
#    - JWT_SECRET (generar uno seguro)
#
# ============================================


# ============================================
# 🗄️ SQL SERVER - CONFIGURACIÓN DEL CONTENEDOR
# ============================================
# Configuración del contenedor de SQL Server en Docker

# Contraseña del usuario SA (System Administrator)
# ⚠️ Requisitos obligatorios:
#   - Mínimo 8 caracteres
#   - Al menos una letra MAYÚSCULA
#   - Al menos una letra minúscula
#   - Al menos un número
#   - Al menos un símbolo especial (!@#$%^&*)
# 💡 Ejemplo fuerte: MyS3cur3P@ssw0rd!2024
MSSQL_SA_PASSWORD=TuPasswordSegura123!

# Edición de SQL Server
# Opciones: Express (gratis), Developer (gratis), Standard, Enterprise
# 💡 Recomendado: Express para desarrollo local
MSSQL_PID=Express

# Puerto externo del contenedor SQL Server
# 💡 Default: 1433 (puerto estándar de SQL Server)
# ⚠️ Si ya tienes SQL Server local, cambiar a 1434 o 14330
SQL_PORT=1433


# ============================================
# 🔌 DATABASE - CONEXIÓN A LA BASE DE DATOS
# ============================================
# Configuración de conexión desde la API hacia SQL Server

# Host del servidor de base de datos
# 💡 Para Docker: usar "sqlserver" (nombre del servicio en docker-compose)
# 💡 Para desarrollo local sin Docker: usar "localhost" o "127.0.0.1"
DB_SERVER=sqlserver

# Puerto de conexión a la base de datos
# 💡 Debe coincidir con SQL_PORT si se usa localhost
# 💡 Para Docker siempre es 1433 (puerto interno del contenedor)
DB_PORT=1433

# Nombre de la base de datos
# 💡 Se creará automáticamente al aplicar migraciones
DB_NAME=AgendifyDb

# Usuario de conexión
# 💡 Default: "sa" (System Administrator)
# ⚠️ En producción, crear un usuario dedicado con permisos limitados
DB_USER=sa

# Contraseña del usuario de base de datos
# ⚠️ DEBE ser IDÉNTICA a MSSQL_SA_PASSWORD
DB_PASSWORD=TuPasswordSegura123!


# ============================================
# 🚀 BACKEND API - CONFIGURACIÓN DE .NET
# ============================================
# Configuración del servidor API (ASP.NET Core)

# Puerto HTTP externo de la API
# 💡 Acceso: http://localhost:5000
# 💡 Swagger: http://localhost:5000/swagger
API_HTTP_PORT=5000

# Puerto HTTPS externo de la API (opcional)
# 💡 Requiere configurar certificados SSL/TLS
# 💡 Para desarrollo local, se puede omitir
API_HTTPS_PORT=5001

# Entorno de ejecución
# Opciones:
#   - Development: Errores detallados, Swagger habilitado
#   - Staging: Pre-producción
#   - Production: Optimizado, sin información sensible
# 💡 Recomendado: Development para desarrollo local
ASPNETCORE_ENVIRONMENT=Development

# URLs de escucha interna de la API
# 💡 Default: http://+:8080 (escucha en todas las interfaces)
# ⚠️ NO cambiar a menos que modifiques el Dockerfile
ASPNETCORE_URLS=http://+:8080


# ============================================
# 🔐 JWT - AUTENTICACIÓN Y SEGURIDAD
# ============================================
# Configuración de tokens JWT para autenticación de usuarios

# Clave secreta para firmar tokens JWT
# ⚠️ CRÍTICO - SEGURIDAD:
#   - Mínimo 64 caracteres
#   - Caracteres aleatorios (letras, números, símbolos)
#   - Cambiar OBLIGATORIAMENTE en producción
#
# 💡 Generar clave segura (elegir uno):
#   PowerShell: -join ((48..57) + (65..90) + (97..122) | Get-Random -Count 64 | ForEach-Object {[char]$_})
#   Bash/Linux: openssl rand -base64 64
#   Online: https://generate-secret.vercel.app/64
#
# 🔒 Esta clave firma los tokens. Si cambia, todos los tokens existentes son inválidos.
JWT_SECRET=TuClaveSecretaSuperLargaYSeguraDeAlMenos64CaracteresParaJWT123456789!

# Emisor del token (nombre de tu aplicación)
# 💡 Identifica quién emite el token
# 💡 Validado al recibir el token en la API
JWT_ISSUER=Agendify

# Audiencia del token (quién puede usar el token)
# 💡 Identifica para quién es el token
# 💡 Validado al recibir el token en la API
# 💡 Puede ser el mismo que JWT_ISSUER o el dominio de tu app
JWT_AUDIENCE=AgendifyUsers


# ============================================
# 🎨 FRONTEND - CONFIGURACIÓN DE ANGULAR
# ============================================
# Configuración del servidor web del frontend

# Puerto externo del frontend
# 💡 Acceso: http://localhost:4200
# 💡 Default de Angular CLI: 4200
FRONTEND_PORT=4200


# ============================================
# 📝 NOTAS ADICIONALES
# ============================================
#
# 🐳 DOCKER COMPOSE:
# - Ejecutar: docker-compose up --build
# - Detener: docker-compose down
# - Ver logs: docker-compose logs -f
#
# 🗃️ MIGRACIONES:
# - Aplicar: .\apply-migrations.ps1
# - O manualmente: docker exec -it agendify-api dotnet ef database update
#
# 🔍 VERIFICAR CONFIGURACIÓN:
# - SQL Server: docker ps (ver contenedor agendify-sqlserver)
# - API: http://localhost:5000/swagger
# - Frontend: http://localhost:4200
#
# 🆘 TROUBLESHOOTING:
# - Error "password does not meet complexity": Revisar MSSQL_SA_PASSWORD
# - Error "cannot connect to database": Verificar DB_SERVER y DB_PORT
# - Error "invalid token": Regenerar JWT_SECRET
# - Puerto ocupado: Cambiar API_HTTP_PORT o FRONTEND_PORT
#
# ============================================

